<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TranscriptPro - YouTube ‡§∏‡•á ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§≠‡§æ‡§∑‡§æ‡§è‡§Ç AI ‡§ï‡•á ‡§∏‡§æ‡§•</title>
    <meta name="description" content="YouTube videos ‡§ï‡•á ‡§∏‡§æ‡§• AI-powered language learning app. Transcripts, translations ‡§î‡§∞ vocabulary management.">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4CAF50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="TranscriptPro">
    
    <!-- Favicon ‡§î‡§∞ App Icons -->
    <link rel="icon" href="assets/icons/favicon.ico">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile.css" media="(max-width: 768px)">
    <link rel="stylesheet" href="css/themes/dark.css" id="theme-stylesheet">
    <!-- EXISTING CSS FILES ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ø‡§π LINE ADD ‡§ï‡§∞‡•á‡§Ç -->
    <link rel="stylesheet" href="css/pronunciation.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <!-- ============================================= -->
    <!-- ‚úÖ ADDED: Backend URL Configuration Script -->
    <!-- ============================================= -->
    <script>
        // Backend URL Configuration - Simple & Clean
        // ‚úÖ Production: Render backend URL
        // ‚úÖ Development: Localhost URL  
        const isLocalDevelopment = window.location.hostname === 'localhost' || 
                                 window.location.hostname === '127.0.0.1';
        
        window.BACKEND_URL = isLocalDevelopment ? 
            'http://localhost:5000' : 
            'https://your-backend-service.onrender.com'; // üîÑ Replace with your actual backend URL
        
        window.API_BASE_URL = window.BACKEND_URL + '/api';

        console.log('üöÄ TranscriptPro App Configuration Loaded');
        console.log('üîó Backend URL:', window.BACKEND_URL);
        console.log('üåê API Base URL:', window.API_BASE_URL);
        console.log('üè† Environment:', isLocalDevelopment ? 'Development' : 'Production');
    </script>
</head>
<body>
    <!-- Loading Screen - App load ‡§π‡•ã‡§§‡•á time show ‡§π‡•ã‡§ó‡§æ -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="logo-large">
                <h1>üéØ TranscriptPro</h1>
                <p>AI-Powered Language Learning</p>
            </div>
            <div class="spinner"></div>
            <p id="loadingMessage">Application loading ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</p>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- App Header -->
        <header class="app-header" id="appHeader">
            <div class="header-container">
                <!-- Logo ‡§î‡§∞ Brand -->
                <div class="brand">
                    <div class="logo">
                        <span class="logo-icon">üéØ</span>
                        <h1 class="logo-text">TranscriptPro</h1>
                    </div>
                    <span class="tagline">YouTube + AI = Smart Learning</span>
                </div>

                <!-- Header Controls -->
                <div class="header-controls">
                    <!-- Authentication Section - Login ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•ã ‡§§‡•ã -->
                    <div id="authSection" class="auth-section">
                        <button id="loginBtn" class="btn btn-outline" aria-label="Login ‡§ï‡§∞‡•á‡§Ç">
                            <span class="btn-icon">üîê</span>
                            Login
                        </button>
                        <button id="registerBtn" class="btn btn-primary" aria-label="Sign Up ‡§ï‡§∞‡•á‡§Ç">
                            <span class="btn-icon">üìù</span>
                            Sign Up
                        </button>
                    </div>

                    <!-- User Section - Login ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ -->
                    <div id="userSection" class="user-section" style="display: none;">
                        <div class="user-profile">
                            <img id="userAvatar" src="" alt="User Avatar" class="user-avatar" 
                                 onerror="this.src='assets/images/default-avatar.png'">
                            <div class="user-info">
                                <span id="userName" class="user-name">User</span>
                                <span id="userLevel" class="user-level">Beginner</span>
                            </div>
                        </div>
                        <div class="user-actions">
                            <button id="userMenuBtn" class="btn btn-icon" aria-label="User menu">
                                <span>‚¨áÔ∏è</span>
                            </button>
                        </div>
                    </div>

                    <!-- Navigation Controls -->
                    <nav class="nav-controls">
                        <button id="vocabularyBtn" class="btn btn-icon" aria-label="My vocabulary" title="My Vocabulary">
                            <span>üìö</span>
                        </button>
                        <button id="settingsBtn" class="btn btn-icon" aria-label="Settings" title="Settings">
                            <span>‚öôÔ∏è</span>
                        </button>
                        <button id="helpBtn" class="btn btn-icon" aria-label="Help" title="Help">
                            <span>‚ùì</span>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- User Dropdown Menu -->
            <div id="userDropdown" class="user-dropdown" style="display: none;">
                <div class="dropdown-content">
                    <a href="#profile" class="dropdown-item">
                        <span class="item-icon">üë§</span>
                        My Profile
                    </a>
                    <a href="#progress" class="dropdown-item">
                        <span class="item-icon">üìä</span>
                        Learning Progress
                    </a>
                    <a href="#subscription" class="dropdown-item">
                        <span class="item-icon">‚≠ê</span>
                        Subscription
                    </a>
                    <div class="dropdown-divider"></div>
                    <button id="logoutBtn" class="dropdown-item logout-btn">
                        <span class="item-icon">üö™</span>
                        Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content" id="mainContent">
            
            <!-- Welcome Section - Video load ‡§π‡•ã‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á -->
            <section id="welcomeSection" class="welcome-section">
                <div class="welcome-container">
                    <div class="welcome-hero">
                        <h2 class="welcome-title">YouTube ‡§∏‡•á ‡§∏‡•Ä‡§ñ‡•á‡§Ç ‡§≠‡§æ‡§∑‡§æ‡§è‡§Ç AI ‡§ï‡•á ‡§∏‡§æ‡§•</h2>
                        <p class="welcome-description">
                            ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä YouTube video ‡§ï‡§æ transcript Hindi ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§è‡§Ç, ‡§®‡§è words save ‡§ï‡§∞‡•á‡§Ç, ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä language skills improve ‡§ï‡§∞‡•á‡§Ç‡•§
                        </p>
                        
                        <!-- Video Input Form -->
                        <div class="video-input-container">
                            <div class="input-group">
                                <input 
                                    type="url" 
                                    id="videoUrlInput" 
                                    class="video-url-input" 
                                    placeholder="YouTube video URL paste ‡§ï‡§∞‡•á‡§Ç..."
                                    aria-label="YouTube video URL"
                                >
                                <button id="loadVideoBtn" class="btn btn-primary btn-large">
                                    <span class="btn-icon">üé¨</span>
                                    Load Video
                                </button>
                            </div>
                            <div class="input-examples">
                                <span class="examples-label">Examples:</span>
                                <button class="example-btn" data-url="https://www.youtube.com/watch?v=example1">TED Talks</button>
                                <button class="example-btn" data-url="https://www.youtube.com/watch?v=example2">News</button>
                                <button class="example-btn" data-url="https://www.youtube.com/watch?v=example3">Tutorials</button>
                            </div>
                        </div>

                        <!-- Feature Highlights -->
                        <div class="feature-highlights">
                            <div class="feature-grid">
                                <div class="feature-card">
                                    <div class="feature-icon">ü§ñ</div>
                                    <h3>AI Transcripts</h3>
                                    <p>Automatic transcript generation ‡§î‡§∞ translation</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üìù</div>
                                    <h3>Smart Vocabulary</h3>
                                    <p>New words save ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ review ‡§ï‡§∞‡•á‡§Ç</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">üéØ</div>
                                    <h3>Progress Tracking</h3>
                                    <p>Your learning journey track ‡§ï‡§∞‡•á‡§Ç</p>
                                </div>
                                <div class="feature-card">
                                    <div class="feature-icon">‚ö°</div>
                                    <h3>Real-time Sync</h3>
                                    <p>Video ‡§ï‡•á ‡§∏‡§æ‡§• live transcript sync</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Video Player Section -->
<section id="videoSection" class="video-section" style="display: none;">
    <div class="video-container">
        <!-- YouTube Player Container -->
        <div class="player-container">
            <div id="youtubePlayer"></div>
            <div class="player-controls">
                <button id="playPauseBtn" class="btn btn-icon" aria-label="Play/Pause">
                    <span>‚èØÔ∏è</span>
                </button>
                <input type="range" id="volumeSlider" min="0" max="100" value="50" 
                       aria-label="Volume control">
                <button id="fullscreenBtn" class="btn btn-icon" aria-label="Fullscreen">
                    <span>üì∫</span>
                </button>
            </div>
        </div>

        <!-- Video Information -->
        <div class="video-info-card">
            <img id="videoThumbnail" src="" alt="Video Thumbnail" class="video-thumbnail">
            <div class="video-details">
                <h3 id="videoTitle" class="video-title">Video Title</h3>
                <p id="videoChannel" class="video-channel">Channel Name</p>
                <div class="video-meta">
                    <span id="videoDuration" class="video-duration">0:00</span>
                    <span id="videoViews" class="video-views">0 views</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Dual Window Transcript Interface -->
<section id="transcriptSection" class="transcript-section" style="display: none;">
    <div class="section-header">
        <h2>Interactive Transcript</h2>
        <div class="section-controls">
            <button id="aiFixBtn" class="btn btn-warning">
                <span class="btn-icon">ü§ñ</span>
                AI Fix Transcript
            </button>
            <button id="exportBtn" class="btn btn-outline">
                <span class="btn-icon">üì§</span>
                Export
            </button>
        </div>
    </div>

    <!-- Dual Window Container -->
    <div class="dual-window-container" id="dualWindowContainer">
        
        <!-- Left Window - Sentences -->
        <div class="transcript-window sentence-window" id="sentenceWindow">
            <div class="window-header" data-window="sentence">
                <div class="window-title">
                    <span class="window-icon">üìù</span>
                    <h3>Sentence Transcript</h3>
                </div>
                <div class="window-controls">
                    <!-- EXISTING CODE ‡§Æ‡•á‡§Ç window-controls div ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§Ø‡§π ADD ‡§ï‡§∞‡•á‡§Ç -->
                    <div class="pronunciation-controls">
                      <button id="sentencePronunciationBtn" class="btn btn-icon pronunciation-btn" title="Pronunciation On/Off">
                        <span class="pronunciation-icon">üîä</span>
                      </button>
                      <select id="sentenceLanguageSelect" class="language-select">
                        <option value="auto">Auto Detect</option>
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                      </select>
                    </div>
                    <button class="window-btn ai-fix-btn" title="AI ‡§∏‡•á Fix ‡§ï‡§∞‡•á‡§Ç">
                        <span>ü§ñ</span>
                    </button>
                    <button class="window-btn refresh-btn" title="Refresh ‡§ï‡§∞‡•á‡§Ç">
                        <span>üîÑ</span>
                    </button>
                    <button class="window-btn minimize-btn" title="Minimize ‡§ï‡§∞‡•á‡§Ç">
                        <span>‚àí</span>
                    </button>
                    <button class="window-btn close-btn" title="Close ‡§ï‡§∞‡•á‡§Ç">
                        <span>√ó</span>
                    </button>
                </div>
            </div>

            <div class="window-content">
                <!-- Current Sentence Display -->
                <div class="current-sentence-section">
                    <div class="section-label">
                        <span class="label-icon">üéØ</span>
                        CURRENTLY PLAYING
                    </div>
                    <div class="current-sentence">
                        <div id="currentSentenceOriginal" class="sentence-original">
                            Video play ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§ø‡§è transcript ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                        </div>
                        <div id="currentSentenceTranslated" class="sentence-translated">
                            ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§™‡•ç‡§≤‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                        </div>
                    </div>
                    <div class="sentence-progress">
                        <div class="progress-info">
                            <span id="sentenceTime" class="time-display">0:00</span>
                            <span id="sentenceCounter" class="counter-display">Sentence 1/10</span>
                        </div>
                        <div class="progress-bar">
                            <div id="sentenceProgressBar" class="progress-fill"></div>
                        </div>
                    </div>
                </div>

                <!-- All Sentences List -->
                <div class="sentences-list-container">
                    <div class="list-header">
                        <h4>All Sentences</h4>
                        <div class="list-controls">
                            <button id="autoScrollToggle" class="btn btn-small btn-success" 
                                    data-enabled="true">
                                Auto-scroll: ON
                            </button>
                        </div>
                    </div>
                    <div id="sentencesList" class="sentences-list">
                        <!-- Sentences dynamically load ‡§π‡•ã‡§Ç‡§ó‡•á -->
                        <div class="empty-state">
                            <p>Video load ‡§π‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§ø‡§è sentences ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á</p>
                        </div>
                    </div>
                </div>
            </div>
                        </div>
                                        <!-- Right Window - Phrases -->
                <div class="transcript-window phrase-window" id="phraseWindow">
                    <div class="window-header" data-window="phrase">
                        <div class="window-title">
                            <span class="window-icon">üî§</span>
                            <h3>Phrase Breakdown</h3>
                        </div>
                        <div class="window-controls">
                            <!-- EXISTING CODE ‡§Æ‡•á‡§Ç window-controls div ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§Ø‡§π ADD ‡§ï‡§∞‡•á‡§Ç -->
                            <div class="pronunciation-controls">
                              <button id="phrasePronunciationBtn" class="btn btn-icon pronunciation-btn" title="Pronunciation On/Off">
                                <span class="pronunciation-icon">üîä</span>
                              </button>
                              <select id="phraseLanguageSelect" class="language-select">
                                <option value="auto">Auto Detect</option>
                                <option value="en">English</option>
                                <option value="hi">Hindi</option>
                              </select>
                            </div>
                            <button class="window-btn refresh-btn" title="Refresh phrases" id="refreshPhrasesBtn">
                                <span>üîÑ</span>
                            </button>
                            <button class="window-btn minimize-btn" title="Minimize ‡§ï‡§∞‡•á‡§Ç">
                                <span>‚àí</span>
                            </button>
                            <button class="window-btn close-btn" title="Close ‡§ï‡§∞‡•á‡§Ç">
                                <span>√ó</span>
                            </button>
                        </div>
                    </div>

                    <div class="window-content">
                        <!-- Current Phrase Display -->
                        <div class="current-phrase-section">
                            <div class="section-label">
                                <span class="label-icon">üìñ</span>
                                CURRENT PHRASE
                            </div>
                            <div class="current-phrase">
                                <div id="currentPhraseOriginal" class="phrase-original">
                                    Sentence select ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§ø‡§è phrase ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                                </div>
                                <div id="currentPhraseTranslated" class="phrase-translated">
                                    ‡§µ‡§æ‡§ï‡•ç‡§Ø ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§µ‡§æ‡§ï‡•ç‡§Ø‡§æ‡§Ç‡§∂ ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                                </div>
                            </div>
                            <div class="phrase-meta">
                                <span id="phraseType" class="phrase-tag type-tag">Common Phrase</span>
                                <span id="phraseDifficulty" class="phrase-tag difficulty-tag">Easy</span>
                            </div>
                        </div>

                        <!-- Phrase Breakdown -->
                        <div class="breakdown-section">
                            <div class="section-label">
                                <span class="label-icon">üîç</span>
                                PHRASE BREAKDOWN
                            </div>
                            <div id="phraseBreakdown" class="breakdown-list">
                                <div class="empty-state">
                                    <p>Selected sentence ‡§ï‡•á phrases ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á</p>
                                </div>
                            </div>
                        </div>

                        <!-- Related Phrases -->
                        <div class="related-section">
                            <div class="section-label">
                                <span class="label-icon">üìö</span>
                                RELATED PHRASES
                            </div>
                            <div id="relatedPhrases" class="related-list">
                                <div class="empty-state">
                                    <p>Similar phrases ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Selection Toolbar (Text select ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ show ‡§π‡•ã‡§ó‡§æ) -->
        <div id="selectionToolbar" class="selection-toolbar" style="display: none;">
            <div class="toolbar-content">
                <div class="selected-text-preview">
                    <span class="preview-label">Selected:</span>
                    <span id="selectedText" class="selected-text"></span>
                </div>
                <div class="toolbar-actions">
                    <button id="saveWordBtn" class="btn btn-success btn-small">
                        <span class="btn-icon">üíæ</span>
                        Save Word
                    </button>
                    <button id="savePhraseBtn" class="btn btn-info btn-small">
                        <span class="btn-icon">üíæ</span>
                        Save Phrase
                    </button>
                    <button id="translateBtn" class="btn btn-outline btn-small">  
                                 <span class="btn-icon">üåê</span>
                        Translate
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- App Footer -->
    <footer class="app-footer" id="appFooter">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>TranscriptPro</h4>
                    <p>AI-powered language learning with YouTube videos</p>
                </div>
                <div class="footer-section">
                    <h4>Features</h4>
                    <ul>
                        <li><a href="#transcripts">AI Transcripts</a></li>
                        <li><a href="#vocabulary">Vocabulary Bank</a></li>
                        <li><a href="#progress">Progress Tracking</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#help">Help Center</a></li>
                        <li><a href="#contact">Contact Us</a></li>
                        <li><a href="#feedback">Feedback</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 TranscriptPro. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#privacy">Privacy Policy</a>
                    <a href="#terms">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>
</div>

<!-- Modals ‡§î‡§∞ Overlays -->

<!-- Authentication Modal -->
<div id="authModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <h3 id="authModalTitle">Login to TranscriptPro</h3>
            <button class="modal-close-btn" id="closeAuthModal" aria-label="Close modal">
                <span>√ó</span>
            </button>
        </div>
        <div class="modal-body">
            <form id="authForm" class="auth-form">
                <!-- Register Fields (Sign Up ‡§ï‡•á time show ‡§π‡•ã‡§Ç‡§ó‡•á) -->
                <div id="registerFields" class="form-fields" style="display: none;">
                    <div class="form-group">
                        <label for="usernameInput" class="form-label">Username</label>
                        <input type="text" id="usernameInput" class="form-input" 
                               placeholder="Choose a username" required
                               minlength="3" maxlength="30">
                        <div class="form-hint">3-30 characters, letters ‡§î‡§∞ numbers only</div>
                    </div>
                </div>

                <!-- Common Fields -->
                <div class="form-group">
                    <label for="emailInput" class="form-label">Email Address</label>
                    <input type="email" id="emailInput" class="form-input" 
                           placeholder="your@email.com" required>
                </div>

                <div class="form-group">
                    <label for="passwordInput" class="form-label">Password</label>
                    <input type="password" id="passwordInput" class="form-input" 
                           placeholder="Enter your password" required
                           minlength="6">
                    <div class="form-hint">Minimum 6 characters</div>
                </div>

                <!-- Confirm Password (Sign Up ‡§ï‡•á time) -->
                <div id="confirmPasswordGroup" class="form-group" style="display: none;">
                    <label for="confirmPasswordInput" class="form-label">Confirm Password</label>
                    <input type="password" id="confirmPasswordInput" class="form-input" 
                           placeholder="Confirm your password" required>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="submit" id="authSubmitBtn" class="btn btn-primary btn-full">
                        <span id="authSubmitText">Login</span>
                    </button>
                </div>
            </form>

            <!-- Social Login Options -->
            <div class="social-login">
                <div class="divider">
                    <span>or continue with</span>
                </div>
                <div class="social-buttons">
                    <button class="btn btn-outline btn-social" disabled>
                        <span class="social-icon">üîµ</span>
                        Google
                    </button>
                    <button class="btn btn-outline btn-social" disabled>
                        <span class="social-icon">üîµ</span>
                        Facebook
                    </button>
                </div>
            </div>

            <!-- Auth Mode Switch -->
            <div class="auth-switch">
                <span id="authSwitchText">Don't have an account?</span>
                <button type="button" id="authSwitchBtn" class="btn btn-link">
                    Sign Up
                </button>
            </div>
        </div>
    </div>
</div>

<!-- AI Fix Modal -->
<div id="aiFixModal" class="modal-overlay" style="display: none;">
    <div class="modal-container large-modal">
        <div class="modal-header">
            <h3>ü§ñ AI Transcript Fix</h3>
            <button class="modal-close-btn" id="closeAIFixModal" aria-label="Close modal">
                <span>√ó</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="ai-fix-options">
                <h4>Fix Type Select ‡§ï‡§∞‡•á‡§Ç</h4>
                <div class="option-group">
                    <label class="option-item">
                        <input type="radio" name="fixType" value="sentence" checked>
                        <span class="option-content">
                            <span class="option-icon">üìù</span>
                            <span class="option-text">
                                <strong>Sentence Separation</strong>
                                <small>Run-on sentences ‡§ï‡•ã properly separate ‡§ï‡§∞‡•á‡§Ç</small>
                            </span>
                        </span>
                    </label>
                    <label class="option-item">
                        <input type="radio" name="fixType" value="phrase">
                        <span class="option-content">
                            <span class="option-icon">üî§</span>
                            <span class="option-text">
                                <strong>Phrase Detection</strong>
                                <small>Important phrases ‡§î‡§∞ idioms identify ‡§ï‡§∞‡•á‡§Ç</small>
                            </span>
                        </span>
                    </label>
                    <label class="option-item">
                        <input type="radio" name="fixType" value="both">
                        <span class="option-content">
                            <span class="option-icon">üéØ</span>
                            <span class="option-text">
                                <strong>Both Improvements</strong>
                                <small>Complete transcript enhance ‡§ï‡§∞‡•á‡§Ç</small>
                            </span>
                        </span>
                    </label>
                </div>
            </div>

            <div class="preview-section">
                <h4>Preview Changes</h4>
                <div class="preview-container">
                    <div class="preview-panel before-panel">
                        <h5>Before Fix</h5>
                        <div id="beforeFixContent" class="preview-content">
                            Original transcript ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                        </div>
                    </div>
                    <div class="preview-panel after-panel">
                        <h5>After AI Fix</h5>
                        <div id="afterFixContent" class="preview-content">
                            AI improved transcript ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ...
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button id="previewAIFixBtn" class="btn btn-secondary">
                    <span class="btn-icon">üëÅÔ∏è</span>
                    Preview Fix
                </button>
                <button id="applyAIFixBtn" class="btn btn-primary" disabled>
                    <span class="btn-icon">‚úÖ</span>
                    Apply AI Fix
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Vocabulary Bank Modal -->
<div id="vocabularyModal" class="modal-overlay" style="display: none;">
    <div class="modal-container large-modal">
        <div class="modal-header">
            <h3>üìö My Vocabulary Bank</h3>
            <button class="modal-close-btn" id="closeVocabularyModal" aria-label="Close modal">
                <span>√ó</span>
            </button>
        </div>
        <div class="modal-body">
            <!-- Vocabulary Statistics -->
            <div class="vocabulary-stats">
                <div class="stat-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="totalWordsCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalPhrasesCount">0</div>
                        <div class="stat-label">Phrases</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="masteredCount">0</div>
                        <div class="stat-label">Mastered</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="dueForReviewCount">0</div>
                        <div class="stat-label">Due for Review</div>
                    </div>
                </div>
            </div>

            <!-- Vocabulary Controls -->
            <div class="vocabulary-controls">
                <div class="search-container">
                    <input type="text" id="vocabularySearch" class="search-input" 
                           placeholder="Search words or phrases...">
                    <span class="search-icon">üîç</span>
                </div>
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">All Items</button>
                    <button class="filter-tab" data-filter="word">Words</button>
                    <button class="filter-tab" data-filter="phrase">Phrases</button>
                    <button class="filter-tab" data-filter="due">Due for Review</button>
                    <button class="filter-tab" data-filter="favorite">Favorites</button>
                </div>
            </div>

            <!-- Vocabulary List -->
            <div class="vocabulary-list-container">
                <div id="vocabularyList" class="vocabulary-list">
                    <div class="empty-state">
                        <div class="empty-icon">üìö</div>
                        <h4>No Vocabulary Items</h4>
                        <p>Words ‡§Ø‡§æ phrases save ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§ø‡§è ‡§µ‡•á ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§Ç‡§ó‡•á</p>
                        <button class="btn btn-primary" onclick="app.closeModal('vocabularyModal')">
                            Start Learning
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <h3>‚öôÔ∏è Settings</h3>
            <button class="modal-close-btn" id="closeSettingsModal" aria-label="Close modal">
                <span>√ó</span>
            </button>
        </div>
        <div class="modal-body">
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="general">General</button>
                <button class="settings-tab" data-tab="playback">Playback</button>
                <button class="settings-tab" data-tab="appearance">Appearance</button>
                <button class="settings-tab" data-tab="account">Account</button>
            </div>

            <div class="settings-content">
                <!-- General Settings -->
                <div id="generalSettings" class="settings-panel active">
                    <div class="setting-group">
                        <h4>Language Preferences</h4>
                        <div class="setting-item">
                            <label for="targetLanguage" class="setting-label">
                                Target Learning Language
                            </label>
                            <select id="targetLanguage" class="setting-input">
                                <option value="hi">Hindi</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="ja">Japanese</option>
                                <option value="ko">Korean</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h4>Auto-Save Settings</h4>
                        <div class="setting-item">
                            <label class="setting-checkbox">
                                <input type="checkbox" id="autoSaveVocabulary" checked>
                                <span class="checkmark"></span>
                                Automatically save new vocabulary
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="setting-checkbox">
                                <input type="checkbox" id="autoSaveProgress" checked>
                                <span class="checkmark"></span>
                                Automatically save learning progress
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Playback Settings -->
                <div id="playbackSettings" class="settings-panel">
                    
                         <div class="setting-group">
                            <h4>Video Playback</h4>
                            <div class="setting-item">
                                <label for="playbackSpeed" class="setting-label">
                                    Default Playback Speed
                                </label>
                                <select id="playbackSpeed" class="setting-input">
                                    <option value="0.25">0.25x</option>
                                    <option value="0.5">0.5x</option>
                                    <option value="0.75">0.75x</option>
                                    <option value="1" selected>1x (Normal)</option>
                                    <option value="1.25">1.25x</option>
                                    <option value="1.5">1.5x</option>
                                    <option value="2">2x</option>
                                </select>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h4>Transcript Sync</h4>
                            <div class="setting-item">
                                <label class="setting-checkbox">
                                    <input type="checkbox" id="autoScroll" checked>
                                    <span class="checkmark"></span>
                                    Auto-scroll with video playback
                                </label>
                            </div>
                            <div class="setting-item">
                                <label class="setting-checkbox">
                                    <input type="checkbox" id="highlightCurrent" checked>
                                    <span class="checkmark"></span>
                                    Highlight current sentence
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Appearance Settings -->
                    <div id="appearanceSettings" class="settings-panel">
                        <div class="setting-group">
                            <h4>Theme</h4>
                            <div class="theme-options">
                                <label class="theme-option">
                                    <input type="radio" name="theme" value="dark" checked>
                                    <span class="theme-preview dark-theme">
                                        <span class="theme-name">Dark</span>
                                    </span>
                                </label>
                                <label class="theme-option">
                                    <input type="radio" name="theme" value="light">
                                    <span class="theme-preview light-theme">
                                                                         <span class="theme-name">Light</span>
                                    </span>
                                </label>
                                <label class="theme-option">
                                    <input type="radio" name="theme" value="auto">
                                    <span class="theme-preview auto-theme">
                                        <span class="theme-name">Auto</span>
                                    </span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-group">
                            <h4>Font Size</h4>
                            <div class="setting-item">
                                <label for="fontSize" class="setting-label">
                                    Transcript Text Size
                                </label>
                                <select id="fontSize" class="setting-input">
                                    <option value="small">Small</option>
                                    <option value="medium" selected>Medium</option>
                                    <option value="large">Large</option>
                                    <option value="x-large">Extra Large</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Account Settings -->
                    <div id="accountSettings" class="settings-panel">
                        <div class="setting-group">
                            <h4>Account Information</h4>
                            <div class="account-info">
                                <div class="info-item">
                                    <span class="info-label">Subscription:</span>
                                    <span class="info-value" id="subscriptionStatus">Free Tier</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Member Since:</span>
                                    <span class="info-value" id="memberSince">-</span>
                                </div>
                            </div>
                        </div>

              
                        <div class="setting-group">
                            <h4>Danger Zone</h4>
                            <div class="danger-actions">
                                <button class="btn btn-outline" id="exportDataBtn">
                                    Export My Data
                                </button>
                                <button class="btn btn-danger" id="deleteAccountBtn">
                                    Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="btn btn-secondary" id="resetSettingsBtn">
                        Reset to Defaults
                    </button>
                    <button class="btn btn-primary" id="saveSettingsBtn">
                        Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- JavaScript Files -->
    <script src="js/utils/helpers.js"></script>
    <script src="js/utils/constants.js"></script>
    <script src="js/services/ApiService.js"></script>
    <script src="js/services/YouTubeService.js"></script>
    <script src="js/services/AIService.js"></script>
    <script src="js/services/DatabaseManager.js"></script>
    <script src="js/components/VideoPlayer.js"></script>
    <script src="js/components/TranscriptManager.js"></script>
    <script src="js/components/VocabularyManager.js"></script>
    <script src="js/components/AuthManager.js"></script>
    <script src="js/components/DualWindowManager.js"></script>
    <script src="js/app.js"></script>
    <!-- EXISTING SCRIPTS ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ø‡§π LINES ADD ‡§ï‡§∞‡•á‡§Ç -->
    <script src="js/services/PronunciationService.js"></script>
    <script src="js/components/DualWindowManager.js"></script>

    <!-- Initialization Script -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        try {
          if (!('speechSynthesis' in window)) {
            console.warn('‚ùå This browser does not support speech synthesis');
            showBrowserWarning();
            return;
          }

          if (window.pronunciationService) {
            console.log('‚úÖ Pronunciation service initialized');
            window.dualWindowManager = new DualWindowManager();
            console.log('‚úÖ Dual window manager initialized with pronunciation support');
            
            setTimeout(() => {
              window.dualWindowManager.loadPronunciationPreferences();
            }, 1000);
            
          } else {
            console.error('‚ùå Pronunciation service not found');
          }
        } catch (error) {
          console.error('‚ùå Pronunciation initialization error:', error);
        }
      });

      function showBrowserWarning() {
        const warningHtml = `
          <div class="pronunciation-warning">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <div class="warning-content">
              <h4>Pronunciation Not Supported</h4>
              <p>Your browser does not support text-to-speech features. Please use Chrome, Firefox, or Edge for pronunciation functionality.</p>
            </div>
            <button class="warning-close" onclick="this.parentElement.remove()">√ó</button>
          </div>
        `;
        
        const warningContainer = document.createElement('div');
        warningContainer.innerHTML = warningHtml;
        document.body.appendChild(warningContainer.firstElementChild);
      }
    </script>

    <!-- Service Worker Registration -->
    <script>
        // Service Worker Register ‡§ï‡§∞‡•á‡§Ç PWA features ‡§ï‡•á ‡§≤‡§ø‡§è
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('‚úÖ ServiceWorker registered: ', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('‚ùå ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
    </html>               
